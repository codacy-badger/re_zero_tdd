<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Re:ゼロから始めるテスト駆動開発</title>
  </head>
  <body>
    <h1>Re:ゼロから始めるテスト駆動開発</h1>
    <header>
      <nav>
        <h1>メニュー</h1>
        <ul>
          <li><a href="index.html">FizzBuzz</a></li>
        </ul>
      </nav>
    </header>
    <section>
      <h1>FizzBuzz</h1>
        <article>
          <h1>FizzBuzzCall</h1>
          <input id='call' type="text">
          <input type="button" value="Call" onclick="fizzBuzzCall()">
        </article>

        <article>
          <h1>FizzBuzzPrint</h1>
          <div id='print'>Initialized</div>
          <input id='input' type="text">
          <input type="button" value="Print" onclick="fizzBuzzPrint()">
        </article>

        <article>
          <h1>FizzBuzzUpDown</h1>
          <div id='updown'>Ready</div>
          <input id='down' type="button" value="-" onclick="fizzBuzzDown()">
          <input id='up' type="button" value="+" onclick="fizzBuzzUp()">
        </article>

        <article>
          <h1>FizzBuzzIterate</h1>
          <input id='iterate_input' type="text">
          <div id='result'></div>
          <input id='iterate' type="button" value="execute" onclick="fizzBuzzIterate()">
        </article>
    </section>
    <footer>
        <p>Copyrights</p>
        <address>hiroshima-arc@gmail.com</address>
    </footer>
  </body>
</html>

<script>
  // assert
  function assert(expected, actual) {
    console.log(".");
    console.assert(
      expected === actual,
      `\nexp:` + expected + `\nact:` + actual
    );
  }

  // FizzBuzz
  function fizzBuzzIterate() {
    var count = document.getElementById('iterate_input').value;
    var target = document.getElementById('result');
    var array = iterate(count);
    target.innerHTML = array;
  }

  fizzBuzzUpDownCount = 0;

  function fizzBuzzUp() {
    fizzBuzzUpDownCount += 1;
    var target = document.getElementById('updown')
    var count = fizzBuzzUpDownCount
    var value = fizzBuzz(count);
    target.innerHTML = value;
  }

  function fizzBuzzDown() {
    if (fizzBuzzUpDownCount == 0) {
      fizzBuzzUpDownCount = 0;
    } else {
      fizzBuzzUpDownCount -= 1;
    }
    var target = document.getElementById('updown')
    var count = fizzBuzzUpDownCount
    var value = fizzBuzz(count);
    target.innerHTML = value;
  }

  function fizzBuzzPrint() {
    var value = document.getElementById('input').value;
    var target = document.getElementById('print')
    if (isNaN(value)) {
      target.innerHTML = '数字を入れてください。';
    } else {
      target.innerHTML = fizzBuzz(value);
    }
  }

  function fizzBuzzCall() {
    var value = document.getElementById('call').value;
    if (isNaN(value)) {
      alert('数字を入れてください。');
    } else {
      alert(fizzBuzz(value));
    }
  }

  COUNT = 100;

  function fizzBuzz(count) {
    if (count % 3 == 0 && count % 5 === 0) {
      return "FizzBuzz";
    } else if (count % 3 == 0) {
      return "Fizz";
    } else if (count % 5 == 0) {
      return "Buzz";
    } else {
      return count;
    }
  }

  function iterate(count) {
    var number = 1;
    var array = [];

    while (number <= count) {
      array.push(fizzBuzz(number));
      number = number + 1;
    }
    return array;
  }

  function execute() {
    iterate(COUNT).forEach(function(value) {
      console.log(value);
    });
  }

  // Test
  function test1から100までプリントする() {
    var array = iterate(100);
    assert(1, array[0]);
    assert("Buzz", array[99]);
  }

  function test3で割り切れる場合はFizzを返す() {
    assert("Fizz", fizzBuzz(3));
    assert(1, fizzBuzz(1));
  }

  function test5で割り切れる場合はBuzzを返す() {
    assert("Buzz", fizzBuzz(5));
  }

  function test3または5で割り切れる場合はFizzBuzzを返す() {
    assert("FizzBuzz", fizzBuzz(15));
  }

  // exec test
  test1から100までプリントする();
  test3で割り切れる場合はFizzを返す();
  test5で割り切れる場合はBuzzを返す();
  test3または5で割り切れる場合はFizzBuzzを返す();

  // exec program
  //execute();
</script>
